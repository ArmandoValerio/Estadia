<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>....</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="btn">
  <i class="fa-regular fa-rectangle-list"></i>
</div>
      <nav class="sidebar">
         <div class="text">
            Apartados
         </div>
         <ul>
            <li class="active"><a href="./index.html">Ubicaciones</a></li>
            <li>
               <a href="./reports.html" class="feat-btn">Reportes
               <span class="fas fa-caret-down first"></span>
               </a>
            </li>
            <li>
               <a href="./tecnicals.html" class="serv-btn">Tecnicos
               <span class="fas fa-caret-down second"></span>
               </a>
            </li>
            <li class="lat">
            <button class="butt">Logout</button>
            </li>
         </ul>
      </nav>
      <script>
         $('.btn').click(function(){
  $(this).toggleClass("click");
  $('.sidebar').toggleClass("show");
  setTimeout(function() {
    map.invalidateSize();
  }, 410); // Espera a que termine la transición CSS
});
           $('.feat-btn').click(function(){
             $('nav ul .feat-show').toggleClass("show");
             $('nav ul .first').toggleClass("rotate");
           });
           $('.serv-btn').click(function(){
             $('nav ul .serv-show').toggleClass("show1");
             $('nav ul .second').toggleClass("rotate");
           });
           $('nav ul li').click(function(){
             $(this).addClass("active").siblings().removeClass("active");
           });
      </script>
    <div class="a1"> 
            <div class="field" id="searchform">
              <h1>Tecnicos</h1>
  <input type="text" id="searchterm" placeholder="what are you searching for?" />
  <button type="button" id="search">Find!</button>
  <div>
    <button id="btnAgregar">
        Agregar
    </button>
</div>
</div>
<script class="cssdeck" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

</div>
       <table class="a1">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Contacto</th>
          <th>Estado</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <script>
  // Configuración de tu proyecto Firebase
 const firebaseConfig = {
  apiKey: "AIzaSyA_cHe-2we5iphebELRkAQMvrsUmk6JmMA",
  authDomain: "estadia-1ae6b.firebaseapp.com",
  projectId: "estadia-1ae6b",
  storageBucket: "estadia-1ae6b.firebasestorage.app",
  messagingSenderId: "546513941878",
  appId: "1:546513941878:web:fcd0efa875b08331713657",
  measurementId: "G-ML4E1VGMMK"
};
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>
    <script>
        let contadorId = 1;
// const tabla = document.querySelector('table');
// const cuerpoTabla = tabla.querySelector('tbody');

function agregarFila() {
    const nuevaFila = cuerpoTabla.insertRow();

    // ID automático
    const celdaId = nuevaFila.insertCell();
    celdaId.textContent = contadorId++;

    // Concepto
    const celdaConcepto = nuevaFila.insertCell();
    celdaConcepto.textContent = 'Nombre';

    // Ubicación
    const celdaUbicacion = nuevaFila.insertCell();
    celdaUbicacion.textContent = 'Contacto';

    // Estado
    const celdaEstado = nuevaFila.insertCell();
    celdaEstado.textContent = 'Estado';

    // Botón Editar
    const celdaEditar = nuevaFila.insertCell();
    const btnEditar = document.createElement('button');
    btnEditar.textContent = 'Editar';
    btnEditar.onclick = function() {
        alert('Editar fila ' + (nuevaFila.rowIndex));
    };
    celdaEditar.appendChild(btnEditar);

    // Botón Eliminar
    const celdaEliminar = nuevaFila.insertCell();
    const btnEliminar = document.createElement('button');
    btnEliminar.textContent = 'Eliminar';
    btnEliminar.onclick = function() {
        tabla.deleteRow(nuevaFila.rowIndex);
    };
    celdaEliminar.appendChild(btnEliminar);
}

  const tabla = document.querySelector('table');
  const cuerpoTabla = tabla.querySelector('tbody');

  function mostrarTecnicos() {
    cuerpoTabla.innerHTML = ""; // Limpia la tabla
    db.collection("Tecnicos").get().then((querySnapshot) => {
      querySnapshot.forEach((doc) => {
        const data = doc.data();
        const nuevaFila = cuerpoTabla.insertRow();

        // ID
        const celdaId = nuevaFila.insertCell();
        celdaId.textContent = data.ID || "";

        // Nombre
        const celdaNombre = nuevaFila.insertCell();
        celdaNombre.textContent = data.Nombre || "";

        // Contacto
        const celdaContacto = nuevaFila.insertCell();
        celdaContacto.textContent = data.Contacto || "";

        // Estado
        const celdaEstado = nuevaFila.insertCell();
        celdaEstado.textContent = data.Estado || "";

        // Botón Editar
        const celdaEditar = nuevaFila.insertCell();
        const btnEditar = document.createElement('button');
        btnEditar.textContent = 'Editar';
        btnEditar.onclick = function() {
          alert('Editar técnico: ' + data.Nombre);
        };
        celdaEditar.appendChild(btnEditar);

        // Botón Eliminar
        const celdaEliminar = nuevaFila.insertCell();
        const btnEliminar = document.createElement('button');
        btnEliminar.textContent = 'Eliminar';
        btnEliminar.onclick = function() {
          db.collection("Tecnicos").doc(doc.id).delete().then(mostrarTecnicos);
        };
        celdaEliminar.appendChild(btnEliminar);
      });
    });
  }

  // Llama a la función al cargar la página
  mostrarTecnicos();

  document.getElementById('btnAgregar').onclick = function() {
    // Puedes pedir los datos con prompt o usar inputs en el formulario
    const nombre = prompt("Nombre del técnico:");
    const contacto = prompt("Contacto:");
    const estado = prompt("Estado:");

    // Busca el ID más alto actual para incrementar (opcional, puedes usar auto-ID de Firestore)
    db.collection("Tecnicos").orderBy("ID", "desc").limit(1).get().then(snapshot => {
        let nuevoId = 1;
        if (!snapshot.empty) {
            nuevoId = (snapshot.docs[0].data().ID || 0) + 1;
        }
        db.collection("Tecnicos").add({
            ID: nuevoId,
            Nombre: nombre,
            Contacto: contacto,
            Estado: estado
        }).then(mostrarTecnicos);
    });
};
    </script>
</body>
</html>